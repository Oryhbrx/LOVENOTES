<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard ❤️</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Merriweather:wght@400;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<style>
body { font-family: 'Quicksand', sans-serif; background: #fff5f8; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
.container { width:100%; max-width:700px; padding:20px; }
h1 { color: #e07a91; font-weight:600; text-align:center; margin-bottom:20px; }
#loginSection { background:#ffeef3; border-radius:15px; padding:30px; box-shadow:0 4px 6px rgba(224,122,145,0.2); text-align:center; }
#loginSection input { width:80%; padding:10px; margin:8px 0; border-radius:8px; border:1px solid #ffd9e2; font-size:1em; }
#loginSection button { padding:10px 20px; border-radius:8px; border:none; background:#e07a91; color:white; cursor:pointer; font-weight:600; transition:0.2s; }
#loginSection button:hover{ background:#d66a7e; }
#adminSection{ display:none; width:100%; }
.panel-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.panel-header h2{ margin:0; color:#e07a91; font-size:1.2em; }
#archiveToggle{ background:#ffd9e2; color:#a85c6b; padding:6px 12px; border-radius:12px; cursor:pointer; font-weight:600; font-size:0.9em; }
#addNoteSection{ margin-bottom:20px; }
#addNoteSection textarea{ width:100%; padding:12px; border-radius:12px; border:1px solid #ffd9e2; margin-bottom:10px; box-sizing:border-box; resize:none; min-height:60px; font-family:'Playfair Display', serif; font-size:1.1em; }
#addNoteSection button{ background:#e07a91; color:white; padding:10px 20px; border-radius:12px; border:none; cursor:pointer; font-weight:600; }
#addNoteSection button:hover{ background:#d66a7e; }
.note, .archive{ background:#ffeef3; border-radius:15px; padding:15px 20px; margin:12px 0; box-shadow:0 6px 10px rgba(224,122,145,0.15); display:flex; justify-content:space-between; align-items:flex-start; transition:transform 0.3s, opacity 0.8s; font-size:1.1em; opacity:0; animation:fadeInSlide 0.8s forwards; }
.note.new{ animation:heartbeatEnvelope 1s ease; }
@keyframes fadeInSlide{ from {opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);} }
@keyframes heartbeatEnvelope{ 0%{transform:scale(1) translateY(-20px);} 25%{transform:scale(1.05) translateY(0);} 50%{transform:scale(1.1) translateY(-5px);} 75%{transform:scale(1.05) translateY(0);} 100%{transform:scale(1) translateY(0);} }
.note div:first-child{ font-family:'Playfair Display', serif; font-size:1.15em; line-height:1.5em; }
.replies{ font-family:'Merriweather', serif; font-size:1em; color:#555; padding-left:15px; margin-top:8px; width:100%; }
.note button, .archive button{ background:#ff6b6b; color:white; border:none; border-radius:8px; padding:5px 12px; cursor:pointer; margin-left:10px; height:fit-content; }
.note button:hover, .archive button:hover{ background:#e05050; }
.archive{ background:#fff0f0; color:#a85c6b; font-style:italic; flex-direction:column; }
</style>
</head>
<body>
<div class="container">
<h1>Admin Dashboard ❤️</h1>
<div id="loginSection">
<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">
<br>
<button onclick="login()">Login</button>
</div>

<div id="adminSection">
<div id="addNoteSection">
<textarea id="newNoteText" placeholder="Write a love note..."></textarea>
<button onclick="addNote()">Add Note</button>
</div>

<div class="panel-header">
<h2>Current Notes</h2>
<div id="archiveToggle" onclick="toggleArchive()">Show Archive</div>
</div>

<div id="notesContainer"></div>
<div id="archiveContainer" style="display:none"></div>
</div>
</div>

<script>
const adminUser={username:'admin',password:'1234'};
let notes=JSON.parse(localStorage.getItem('notes'))||[];
let archive=JSON.parse(localStorage.getItem('archive'))||[];

function saveData(){ localStorage.setItem('notes',JSON.stringify(notes)); localStorage.setItem('archive',JSON.stringify(archive)); }

function checkArchive(){
  const now=new Date().getTime();
  for(let i=notes.length-1;i>=0;i--){
    const noteTime=new Date(notes[i].created_at).getTime();
    if(now-noteTime>24*60*60*1000){ archive.push(notes[i]); notes.splice(i,1); }
  }
  saveData();
}

function displayNotes(){
  checkArchive();
  const container=document.getElementById('notesContainer'); container.innerHTML='';
  notes.forEach((note,index)=>{
    const noteDiv=document.createElement('div'); noteDiv.className='note';
    if(!note.displayed){ noteDiv.classList.add('new'); note.displayed=true; saveData(); }
    noteDiv.innerHTML=`<div><strong>${note.message}</strong><div class="replies">${note.replies?.length?note.replies.map(r=>`• ${r}`).join('<br>'):'No replies yet.'}</div></div>`;
    const delBtn=document.createElement('button'); delBtn.textContent='Delete';
    delBtn.onclick=()=>{ if(confirm('Delete this note?')){ notes.splice(index,1); saveData(); displayNotes(); } };
    noteDiv.appendChild(delBtn); container.appendChild(noteDiv);
  });

  const archiveContainer=document.getElementById('archiveContainer'); archiveContainer.innerHTML='';
  archive.forEach(note=>{ const aDiv=document.createElement('div'); aDiv.className='archive'; aDiv.textContent=note.message; archiveContainer.appendChild(aDiv); });
}

function addNote(){
  const text=document.getElementById('newNoteText').value.trim();
  if(text){
    const newNote={message:text,created_at:new Date().toISOString(),replies:[]};
    notes.push(newNote);
    saveData();
    // Update timestamp for instant notification
    localStorage.setItem('lastNoteAdded', new Date().getTime());
    document.getElementById('newNoteText').value=''; displayNotes();
  }
}

function login(){
  const user=document.getElementById('username').value;
  const pass=document.getElementById('password').value;
  if(user===adminUser.username && pass===adminUser.password){
    document.getElementById('loginSection').style.display='none';
    document.getElementById('adminSection').style.display='block';
    displayNotes();
  } else alert('Invalid login!');
}

function toggleArchive(){
  const archiveDiv=document.getElementById('archiveContainer');
  const toggle=document.getElementById('archiveToggle');
  if(archiveDiv.style.display==='none'||archiveDiv.style.display===''){ archiveDiv.style.display='block'; toggle.textContent='Hide Archive'; }
  else{ archiveDiv.style.display='none'; toggle.textContent='Show Archive'; }
}

displayNotes();
setInterval(displayNotes,60000);
</script>
</body>
</html>